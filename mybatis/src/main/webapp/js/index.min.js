$(window).load(function() {
	function b() {
		var c = [];
		c[0] = $(document).innerHeight() - (70 + 21);
		c[1] = $(".tab-content>.active").innerHeight() + 32;
		c[2] = $(".menu-body").innerHeight() + 29;
		c.sort(function(e, d) {
			return e - d
		});
		$(".main").height(c[2]);
		$(".tab-content").height(c[2] - 32);
		$(".index.active").height(c[2] - 32)
	}
	$(document).on("resizeHeight", function() {
		b()
	});
	$(document).trigger("resizeHeight");
	var a = $(document).innerWidth();
	$(window).resize(function() {
		var c = $(window).innerWidth();
		if (c > a) {
			$(document).trigger("zoomWindow")
		} else {
			$(document).trigger("shrinkWindow")
		}
		$(document).trigger("resizeHeight");
		a = c
	})
});
$(function() {
	var a = function() {
		this.$leftArrow = $(".left-arrow");
		this.$rightArrow = $(".right-arrow");
		this.$navWraper = $(".nav-wraper-w");
		this.$navTabContainer = $(".nav-wraper");
		this.$navWrap = $(".nav-wrap");
		this.$navTab = this.$navTabContainer.find(".nav-tabs");
		this.$tabContent = $(".tab-content");
		this.$tabDropdown = $(".nav-wraper-w>.dropdown");
		this.$tabDropdownMenu = this.$tabDropdown.find(".dropdown-menu")
	};
	a.prototype = {
		init : function() {
			var e = this;
			this.$navTab.on("addTab.tab", function(f) {
				e.addTab(f)
			});
			this.$leftArrow.on("click.left.arrow", function() {
				e.moveAnimation("left");
				return false
			});
			this.$rightArrow.on("click.right.arrow", function() {
				e.moveAnimation("right");
				return false
			});
			this.$navWraper.on("shown.bs.tab", 'a[data-toggle="tab"]',
					function() {
						var f = $(this).attr("href");
						e.$tabDropdownMenu.find(".active")
								.removeClass("active");
						e.getTab(e.$tabDropdownMenu, f).parent().addClass(
								"active");
						e.moveAnimation("none", $(this).parent().index())
					});
			this.$tabDropdownMenu.on("click.tab", 'a[data-toggle="tab"]',
					function() {
						var f = $(this).attr("href");
						e.getTab(e.$navTab, f).tab("show")
					});
			this.$navTab.on("click", ".tab-close", function() {
				e.closeTab($(this))
			})
		},
		addTab : function(g) {
			var e = $(g.relatedTarget), f = {}, h;
			f.id = e.attr("href");
			f.fileName = e.parent().parent().parent().find(">a").attr("href")
					.substring(1);
			f.pageName = f.id.substring(1);
			f.text = $(e).text();
			this.$navWraper.find(".active").removeClass("active");
			if ($(f.id).length > 0) {
				this.$navWraper.find('a[href="' + f.id + '"]').tab("show")
			} else {
				h = '<li class="active"><a href="' + f.id
						+ '" data-toggle="tab">' + f.text
						+ '</a><span class="tab-close">Ã—</span></li>';
				this.$navTab.append(h);
				this.$tabDropdownMenu.append(h);
				this.$navWrap.animate({
					left : this.getLeft()
				}, "fast");
				this.addTabContent(f)
			}
		},
		addTabContent : function(f) {
			var e = $('<div class="tab-pane active" id="' + f.pageName
					+ '"><iframe frameborder="0" src="' + f.fileName + "/"
					+ f.pageName + '.html" name="' + f.pageName
					+ '"></iframe></div>');
			this.$tabContent.find(".active").removeClass("active");
			this.$tabContent.append(e)
		},
		getLeft : function() {
			var f, e;
			f = this.$navTab.innerWidth();
			e = this.$navTabContainer.innerWidth();
			if (f > e) {
				return e - f - 2
			} else {
				return 0
			}
		},
		getMoveLeftWidth : function(g) {
			var h = this.$navTab.find(">li"), e = 0, f;
			if (g === 0) {
				return g
			}
			for (f = 0; f < h.length; f += 1) {
				e += h.eq(f).outerWidth(true);
				if (e + g >= 0) {
					return h.eq(f).outerWidth(true) - e
				}
			}
		},
		getMoveRightWidth : function(j) {
			var k = this.$navTab.find(">li"), g = this.$navTabContainer
					.innerWidth(), h = this.$navTab.innerWidth(), e = 0, f;
			if (h < g || h === g - j - 2) {
				return j
			}
			for (f = 0; f < k.length; f += 1) {
				e += k.eq(f).outerWidth(true);
				if (e + j - g > 0) {
					return -(e - g + 2)
				}
			}
		},
		getPosition : function(f, k) {
			var l = this.$navTab.find(">li"), j = this.$navTabContainer
					.innerWidth(), e = 0, h, g = l.eq(f).outerWidth(true);
			for (h = 0; h < f; h += 1) {
				e += l.eq(h).outerWidth(true)
			}
			if (e + k > 0 && e + g <= j - k) {
				return k
			}
			if (e + k <= 0) {
				return -e
			}
			if (e + g > j - k) {
				return -(e - j + g + 2)
			}
		},
		closeTab : function(g) {
			var j = g.parent().find("a").attr("href"), i = g.parent(), f = i
					.prev(), h = i.hasClass("active"), e;
			i.remove();
			this.getTab(this.$tabDropdownMenu, j).parent().remove();
			this.$navWrap.css({
				left : this.getLeft()
			});
			if (f.length > 0 && h) {
				f.find("a").tab("show");
				e = f.find("a").attr("href");
				this.getTab(this.$tabDropdownMenu, e).parent().addClass(
						"active")
			}
			$(j).remove();
			$(document).trigger("resizeHeight")
		},
		getTab : function(f, e) {
			return f.find('a[href="' + e + '"]')
		},
		moveAnimation : function(f, e) {
			var h = parseInt(this.$navWrap.css("left")), g;
			if (f === "left") {
				g = this.getMoveLeftWidth(h)
			}
			if (f === "right") {
				g = this.getMoveRightWidth(h)
			}
			if (f === "none") {
				g = this.getPosition(e, h)
			}
			this.$navWrap.animate({
				left : g
			}, "fast")
		}
	};
	var c = function() {
		this.$menu = $(".menu-list")
	};
	c.prototype = {
		init : function() {
			var e = this;
			this.$menu.on("click", ">li>a", function() {
				e.toggleMenuList($(this));
				return false
			});
			this.$menu.on("click", ">li>ul>li", function() {
				var g, f = $.Event("addTab.tab", {
					relatedTarget : $(this).find("a")[0]
				});
				g = $(".nav-wraper .nav-tabs");
				e.toggleMenuItem($(this));
				g.trigger(f)
			})
		},
		toggleMenuList : function(e) {
			var f = e.parent();
			if (f.hasClass("active")) {
				f.removeClass("active")
			} else {
				this.$menu.find(".active").removeClass("active");
				f.addClass("active")
			}
		},
		toggleMenuItem : function(e) {
			$(".bg-ccce680").removeClass("bg-ccce680");
			e.addClass("bg-ccce680")
		}
	};
	var b = new c();
	var d = new a();
	b.init();
	d.init()
});